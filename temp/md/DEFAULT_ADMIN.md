# é»˜è®¤ç®¡ç†å‘˜è´¦å·è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

KnowBooks ç³»ç»Ÿåœ¨**é¦–æ¬¡å¯åŠ¨æ—¶**ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿå¼€å§‹ä½¿ç”¨ã€‚

## ğŸ”‘ é»˜è®¤è´¦å·ä¿¡æ¯

### ç™»å½•å‡­è¯

```
ç”¨æˆ·åï¼šbooks
å¯†ç ï¼šbooks
é‚®ç®±ï¼šadmin@knowbooks.local
```

### ç§äººè®¿é—®å¯†é’¥

```
ç§äººè®¿é—®å¯†é’¥ï¼šbooks
```

## ğŸš€ ä½¿ç”¨æµç¨‹

### 1. é¦–æ¬¡å¯åŠ¨

å½“ç³»ç»Ÿé¦–æ¬¡å¯åŠ¨ï¼ˆæ•°æ®åº“ä¸­æ— ä»»ä½•ç”¨æˆ·æ—¶ï¼‰ï¼Œä¼šè‡ªåŠ¨ï¼š

1. åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼ˆç”¨æˆ·åï¼š`books`ï¼Œå¯†ç ï¼š`books`ï¼‰
2. è®¾ç½®ç§äººè®¿é—®å¯†é’¥ä¸º `books`
3. åœ¨æ§åˆ¶å°è¾“å‡ºè´¦å·ä¿¡æ¯

**æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹ï¼š**

```
========================================
ğŸ“š æ¬¢è¿ä½¿ç”¨ KnowBooksï¼
========================================
ç³»ç»Ÿä¸­æš‚æ— ç”¨æˆ·ï¼Œæ­£åœ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦å·...
========================================
âœ… é»˜è®¤ç®¡ç†å‘˜è´¦å·åˆ›å»ºæˆåŠŸï¼
========================================
ğŸ‘¤ ç”¨æˆ·å: books
ğŸ”‘ å¯†ç : books
ğŸ“§ é‚®ç®±: admin@knowbooks.local
ğŸ” ç§äººè®¿é—®å¯†é’¥: books
========================================
âš ï¸  å®‰å…¨æç¤ºï¼š
   1. è¯·ç«‹å³ç™»å½•ç³»ç»Ÿä¿®æ”¹é»˜è®¤å¯†ç 
   2. å»ºè®®ä¿®æ”¹ç§äººè®¿é—®å¯†é’¥
   3. å¯åœ¨"è®¾ç½®-ç³»ç»Ÿè®¾ç½®"ä¸­ç®¡ç†è®¿é—®æ§åˆ¶
========================================
```

### 2. é¦–æ¬¡ç™»å½•

è®¿é—®ç³»ç»ŸURLï¼Œä½¿ç”¨é»˜è®¤è´¦å·ç™»å½•ï¼š

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://your-server-ip:port`
2. ç‚¹å‡»"ç™»å½•"
3. è¾“å…¥ç”¨æˆ·åï¼š`books`
4. è¾“å…¥å¯†ç ï¼š`books`
5. å¦‚æœå¯ç”¨äº†ç§äººè®¿é—®å¯†é’¥éªŒè¯ï¼Œè¾“å…¥ï¼š`books`
6. ç‚¹å‡»ç™»å½•

### 3. ä¿®æ”¹é»˜è®¤å¯†ç ï¼ˆé‡è¦ï¼ï¼‰

**å¼ºçƒˆå»ºè®®é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç ï¼š**

1. ç™»å½•åï¼Œç‚¹å‡»å³ä¸Šè§’å¤´åƒ
2. é€‰æ‹©"ä¸ªäººè®¾ç½®"æˆ–"ç”¨æˆ·ç®¡ç†"
3. ä¿®æ”¹å¯†ç 
4. ä¿å­˜

### 4. ä¿®æ”¹ç§äººè®¿é—®å¯†é’¥ï¼ˆæ¨èï¼‰

**å»ºè®®ä¿®æ”¹é»˜è®¤çš„ç§äººè®¿é—®å¯†é’¥ï¼š**

1. è¿›å…¥"è®¾ç½®" â†’ "ç³»ç»Ÿè®¾ç½®"
2. æ‰¾åˆ°"ç§äººè®¿é—®å¯†é’¥"è®¾ç½®
3. ä¿®æ”¹ä¸ºæ‚¨è‡ªå·±çš„å¯†é’¥
4. ä¿å­˜

## ğŸ” å®‰å…¨å»ºè®®

### âš ï¸ å¿…é¡»æ“ä½œ

1. **ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç **
   - é»˜è®¤å¯†ç è¿‡äºç®€å•ï¼Œå®¹æ˜“è¢«çŒœæµ‹
   - å»ºè®®ä½¿ç”¨åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦çš„å¼ºå¯†ç 

2. **ä¿®æ”¹ç§äººè®¿é—®å¯†é’¥**
   - å¦‚æœç³»ç»Ÿå¯¹å¤–å¼€æ”¾ï¼ŒåŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†é’¥
   - ä½¿ç”¨å¤æ‚ä¸”éš¾ä»¥çŒœæµ‹çš„å¯†é’¥

### ğŸ”’ æ¨èæ“ä½œ

3. **å¯ç”¨è®¿é—®æ§åˆ¶**
   - åœ¨"ç³»ç»Ÿè®¾ç½®"ä¸­é…ç½®ï¼š
     - `private_key_required_for_login`: ç™»å½•æ—¶éœ€è¦ç§é’¥
     - `private_key_required_for_register`: æ³¨å†Œæ—¶éœ€è¦ç§é’¥
     - `registration_enabled`: æ˜¯å¦å…è®¸ç”¨æˆ·æ³¨å†Œ

4. **ä½¿ç”¨HTTPS**
   - åœ¨å…¬ç½‘éƒ¨ç½²æ—¶ï¼ŒåŠ¡å¿…é…ç½®SSLè¯ä¹¦
   - é¿å…æ˜æ–‡ä¼ è¾“å¯†ç 

5. **å®šæœŸå¤‡ä»½**
   - å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶
   - å¤‡ä»½ä½ç½®ï¼š`/app/data/database.db`ï¼ˆDockerç¯å¢ƒï¼‰

## ğŸ“ æ³¨æ„äº‹é¡¹

### ä½•æ—¶ä¼šåˆ›å»ºé»˜è®¤è´¦å·

- âœ… **ä¼šåˆ›å»º**ï¼šæ•°æ®åº“å®Œå…¨ä¸ºç©ºï¼ˆæ— ä»»ä½•ç”¨æˆ·ï¼‰æ—¶
- âŒ **ä¸ä¼šåˆ›å»º**ï¼šå·²æœ‰ç”¨æˆ·ï¼ˆå³ä½¿æ²¡æœ‰ç®¡ç†å‘˜ï¼‰æ—¶

### å¦‚æœå¿˜è®°å¯†ç 

å¦‚æœå¿˜è®°äº†ç®¡ç†å‘˜å¯†ç ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š

#### æ–¹æ¡ˆ1: åˆ é™¤æ•°æ®åº“é‡æ–°åˆå§‹åŒ–

```bash
# âš ï¸ è­¦å‘Šï¼šæ­¤æ“ä½œä¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼

# åœæ­¢æœåŠ¡
docker-compose down

# åˆ é™¤æ•°æ®åº“
rm /volume5/docker/bookpath/data/database.db

# é‡å¯æœåŠ¡ï¼ˆä¼šé‡æ–°åˆ›å»ºé»˜è®¤è´¦å·ï¼‰
docker-compose up -d
```

#### æ–¹æ¡ˆ2: ä½¿ç”¨SQLiteç›´æ¥ä¿®æ”¹å¯†ç 

```bash
# è¿›å…¥åç«¯å®¹å™¨
docker exec -it knowbooks-backend sh

# å®‰è£…bcryptjså’Œnode REPL
node

# åœ¨Node REPLä¸­ç”Ÿæˆæ–°å¯†ç çš„hash
> const bcrypt = require('bcryptjs');
> const newPassword = 'your-new-password';
> const hash = bcrypt.hashSync(newPassword, 10);
> console.log(hash);
> .exit

# ä½¿ç”¨sqlite3ä¿®æ”¹å¯†ç ï¼ˆéœ€è¦å…ˆå®‰è£…sqlite3ï¼‰
# æˆ–è€…åœ¨å®¿ä¸»æœºä¸Šï¼š
sqlite3 /volume5/docker/bookpath/data/database.db
UPDATE users SET password = 'YOUR_HASH_HERE' WHERE username = 'books';
.exit
```

## ğŸ¯ Dockeréƒ¨ç½²ç‰¹åˆ«è¯´æ˜

### é¦–æ¬¡éƒ¨ç½²

```bash
# 1. æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# 2. æŸ¥çœ‹æ—¥å¿—ï¼Œç¡®è®¤é»˜è®¤è´¦å·åˆ›å»º
docker-compose logs backend | grep "é»˜è®¤ç®¡ç†å‘˜è´¦å·"

# 3. è®¿é—®ç³»ç»Ÿå¹¶ç™»å½•
# URL: http://your-server-ip:1280
# ç”¨æˆ·å: books
# å¯†ç : books
```

### æ•°æ®æŒä¹…åŒ–

æ•°æ®åº“æ–‡ä»¶å­˜å‚¨åœ¨ï¼š

```yaml
volumes:
  - /volume5/docker/bookpath/data:/app/data  # æ•°æ®åº“ç›®å½•
```

åªè¦è¿™ä¸ªç›®å½•ä¸è¢«åˆ é™¤ï¼Œé»˜è®¤è´¦å·åªä¼šåœ¨é¦–æ¬¡åˆ›å»ºã€‚

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š

- `DOCKER_TROUBLESHOOTING.md` - Dockeréƒ¨ç½²æ•…éšœæ’é™¤
- `README.md` - å®Œæ•´ä½¿ç”¨æ–‡æ¡£
- åç«¯æ—¥å¿—ï¼š`docker-compose logs backend`

---

**æœ€åæ›´æ–°**: 2025-12-11
**ç‰ˆæœ¬**: 1.0.0
