# 用户管理功能使用示例

## 快速开始

### 访问用户管理页面

1. 使用管理员账号登录系统
2. 点击导航栏中的"设置"
3. 在管理员功能区点击"用户管理"
4. 或直接访问 `/users` 路径

## 操作示例

### 示例1：创建新用户

**场景**：需要为新员工创建账号

```
1. 点击"创建用户"按钮
2. 填写信息：
   - 用户名：zhangsan
   - 邮箱：zhangsan@example.com
   - 密码：123456
   - 角色：普通用户
3. 点击"确认创建"
4. 系统提示"用户创建成功"
```

### 示例2：修改用户邮箱

**场景**：用户更换了邮箱地址

```
1. 在用户列表中找到目标用户
2. 点击该用户行的"编辑"图标（铅笔图标）
3. 修改邮箱为新地址：newemail@example.com
4. 点击"保存修改"
5. 系统提示"用户信息更新成功"
```

### 示例3：提升用户为管理员

**场景**：将信任的用户提升为管理员

```
1. 在用户列表中找到目标用户
2. 在"角色"列的下拉框中选择"管理员"
3. 系统自动保存并提示"角色更新成功"
```

### 示例4：重置用户密码

**场景**：用户忘记密码需要重置

```
1. 在用户列表中找到目标用户
2. 点击该用户行的"钥匙"图标
3. 输入新密码：newpassword123
4. 点击"确认重置"
5. 系统提示"密码重置成功"
6. 将新密码告知用户，建议用户登录后立即修改
```

### 示例5：删除用户

**场景**：员工离职，需要删除其账号

```
1. 在用户列表中找到目标用户
2. 点击该用户行的"删除"图标（垃圾桶图标）
3. 在确认对话框中点击"确定"
4. 系统提示"用户删除成功"
5. 注意：该用户的所有数据（书架、阅读历史等）将被一并删除
```

### 示例6：搜索用户

**场景**：在大量用户中快速找到特定用户

```
1. 在搜索框中输入用户名或邮箱的关键词
2. 系统实时过滤显示匹配的用户
3. 清空搜索框可显示所有用户
```

## 常见场景处理

### 场景：批量创建用户

如果需要批量创建用户（如新学期开学），建议：

1. 准备好用户信息列表（用户名、邮箱）
2. 使用统一的初始密码（如：123456）
3. 逐个创建用户
4. 导出账号信息发给用户
5. 要求用户首次登录后修改密码

### 场景：管理员交接

当需要更换系统管理员时：

1. 创建新管理员账号（角色选择"管理员"）
2. 通知新管理员登录测试
3. 确认新管理员可以正常使用后
4. 将旧管理员降级为普通用户
5. 或删除旧管理员账号（如果不再需要）

### 场景：用户信息变更

当用户的联系方式发生变化：

1. 点击编辑按钮修改邮箱
2. 如需修改用户名，需要：
   - 创建新账号（使用新用户名）
   - 提醒用户数据无法迁移
   - 删除旧账号（如果确认不再使用）

### 场景：权限审计

定期检查用户权限：

1. 按角色筛选查看所有管理员
2. 确认每个管理员是否应该保留权限
3. 降级不需要管理权限的用户
4. 确保至少保留一个活跃的管理员

## 最佳实践

### 密码管理
- ✅ 使用强密码（至少6位，建议8位以上）
- ✅ 定期提醒用户修改密码
- ✅ 不要使用常见密码（如123456）
- ✅ 重置密码后及时通知用户

### 权限管理
- ✅ 遵循最小权限原则
- ✅ 只给必要的用户管理员权限
- ✅ 定期审计管理员列表
- ✅ 离职用户及时删除或禁用

### 用户信息
- ✅ 使用真实有效的邮箱地址
- ✅ 用户名保持简洁易记
- ✅ 建立用户信息管理制度
- ✅ 定期清理不活跃用户

### 操作安全
- ✅ 删除前务必二次确认
- ✅ 重要操作前备份数据
- ✅ 记录重要的管理操作
- ✅ 至少保留一个管理员账号

## API调用示例

如果需要通过API直接管理用户（例如批量导入）：

### 创建用户
```bash
curl -X POST http://localhost:3001/api/users \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "newuser",
    "email": "newuser@example.com",
    "password": "password123",
    "role": "user"
  }'
```

### 更新用户邮箱
```bash
curl -X PUT http://localhost:3001/api/users/USER_ID \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "newemail@example.com"
  }'
```

### 修改用户角色
```bash
curl -X PUT http://localhost:3001/api/users/USER_ID/role \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "role": "admin"
  }'
```

### 重置密码
```bash
curl -X PUT http://localhost:3001/api/users/USER_ID/password \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "password": "newpassword123"
  }'
```

### 删除用户
```bash
curl -X DELETE http://localhost:3001/api/users/USER_ID \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN"
```

## 错误处理

### 常见错误及解决方法

**错误：用户名或邮箱已存在**
- 原因：系统中已有相同的用户名或邮箱
- 解决：使用不同的用户名或邮箱

**错误：密码长度至少6位**
- 原因：密码太短
- 解决：使用至少6位的密码

**错误：不能删除自己的账号**
- 原因：管理员试图删除自己
- 解决：让其他管理员删除，或先创建新管理员

**错误：至少需要保留一个管理员账号**
- 原因：试图删除或降级最后一个管理员
- 解决：先创建或提升其他管理员

**错误：您没有权限访问此页面**
- 原因：非管理员用户访问用户管理页面
- 解决：使用管理员账号登录

## 数据备份建议

在执行批量删除或重要操作前，建议：

1. 导出用户列表（可通过API获取）
2. 备份数据库文件
3. 记录操作内容
4. 确认无误后再执行

---

通过以上示例，您应该能够熟练使用用户管理系统的各项功能。
