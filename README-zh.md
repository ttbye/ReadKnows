# ğŸ“š ReadKnows (è¯»å£«ç§äººä¹¦åº“)

<div align="right">
<sub>[English](README.md) | [ä¸­æ–‡](README-zh.md)</sub>
</div>

<div align="center">

![Version](https://img.shields.io/badge/version-2.4.262-blue.svg)
![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)
![Docker](https://img.shields.io/badge/docker-ready-blue.svg)
![Platform](https://img.shields.io/badge/platform-macOS%20%7C%20Windows%20%7C%20Linux%20%7C%20NAS-lightgrey.svg)

**æ”¯æŒå¤šæ ¼å¼ã€å¤šå¹³å°ã€å¤šç”¨æˆ·çš„ç§äººç”µå­ä¹¦ç®¡ç†å¹³å°**

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [å®‰è£…éƒ¨ç½²](#-å®‰è£…éƒ¨ç½²) â€¢ [ä½¿ç”¨æ–‡æ¡£](#-ä½¿ç”¨æ–‡æ¡£)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

å‹æƒ…æé†’ï¼šæœ¬ç³»ç»Ÿä»…ä¾›ä¸ªäººå­¦ä¹ å’Œå›¾ä¹¦ã€æ–‡æ¡£èµ„æ–™ç®¡ç†ä½¿ç”¨ï¼

> ğŸ’¡ **ç‰¹åˆ«æç¤º**ï¼š
> - Android APP åœ¨å¼€æ”¾å¼å¢¨æ°´å±ç”µå­ä¹¦ï¼ˆå¦‚ï¼šæŒé˜…ç”µçº¸ä¹¦ç­‰ï¼‰ä¸Šå®‰è£…åä½¿ç”¨è‰¯å¥½ï¼Œä¸ºå¢¨æ°´å±é˜…è¯»æä¾›äº†ä¼˜ç§€çš„é˜…è¯»ä½“éªŒã€‚
> - iPad æˆ– iPhone ç­‰ iOS è®¾å¤‡å¯é€šè¿‡ PWAï¼ˆæ¸è¿›å¼ Web åº”ç”¨ï¼‰ä½¿ç”¨ã€‚æ— éœ€é€šè¿‡ App Store å®‰è£…ï¼Œç›´æ¥åœ¨ Safari æµè§ˆå™¨ä¸­è®¿é—®ç½‘ç«™å¹¶æ·»åŠ åˆ°ä¸»å±å¹•å³å¯ä½¿ç”¨ã€‚

ReadKnowsï¼ˆè¯»å£«ç§äººä¹¦åº“ï¼‰æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç§äººç”µå­ä¹¦ç®¡ç†å¹³å°ï¼Œæ”¯æŒ EPUBã€PDFã€TXTã€MOBIã€docxã€md ç­‰å¤šç§æ ¼å¼çš„ç”µå­ä¹¦é˜…è¯»å’Œç®¡ç†ã€‚é‡‡ç”¨ç°ä»£åŒ–çš„ Web æŠ€æœ¯æ ˆï¼Œæä¾›æµç•…çš„é˜…è¯»ä½“éªŒå’Œå¼ºå¤§çš„ç®¡ç†åŠŸèƒ½ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ“š **å¤šæ ¼å¼æ”¯æŒ**: EPUBã€PDFã€TXTã€MOBIã€DOCXã€MD
- ğŸŒ **å¤šå¹³å°è®¿é—®**: Webã€iOS (PWA)ã€Android (APK)ã€macOSã€Windows
- ğŸ‘¥ **å¤šç”¨æˆ·ç³»ç»Ÿ**: ä¸ªäººä¹¦æ¶å’Œé˜…è¯»è¿›åº¦ç‹¬ç«‹ç®¡ç†
- ğŸ“± **PWA æ”¯æŒ**: å¯å®‰è£…åˆ°è®¾å¤‡ä¸»å±å¹•
- ğŸ¨ **ä¸“ä¸šé˜…è¯»å™¨**: å†…ç½®ä¸“ä¸šçš„ EPUB å’Œ PDF é˜…è¯»å™¨ï¼Œæ”¯æŒå¤šç§é˜…è¯»ä¸»é¢˜
- ğŸ” **æ™ºèƒ½æœç´¢**: æ”¯æŒå…¨æ–‡æœç´¢ï¼Œå¿«é€Ÿå®šä½å†…å®¹
- ğŸ“Š **é˜…è¯»ç»Ÿè®¡**: è¯¦ç»†çš„é˜…è¯»å†å²å’Œè¿›åº¦ç»Ÿè®¡
- ğŸ¤– **AI é›†æˆ**: æ”¯æŒ Ollama ç­‰ AI æœåŠ¡ï¼Œæä¾›æ™ºèƒ½é˜…è¯»è¾…åŠ©
- ğŸ“¦ **æ‰¹é‡å¯¼å…¥**: æ”¯æŒæ‰¹é‡æ‰«æå’Œå¯¼å…¥æœ¬åœ°ä¹¦ç±
- ğŸ” **å®‰å…¨å¯é **: JWT è®¤è¯ï¼ŒIP è®¿é—®æ§åˆ¶ï¼Œæ•°æ®åŠ å¯†å­˜å‚¨
- ğŸ“ **ç¬”è®°ç®¡ç†**: æ”¯æŒé˜…è¯»ç¬”è®°ã€é«˜äº®æ ‡è®°ï¼Œæ”¯æŒå¯¼å‡ºå’Œå¯¼å…¥ä¸ºç¬”è®°ä¹¦
- ğŸ·ï¸ **åˆ†ç±»ç®¡ç†**: æ”¯æŒä¹¦ç±åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
- ğŸ“¡ **OPDS æ”¯æŒ**: æ”¯æŒ OPDS åè®®ï¼Œå…¼å®¹ä¸»æµé˜…è¯»å™¨
- ğŸ”Š **è¯­éŸ³æœ—è¯»**: æ”¯æŒåœ¨çº¿ TTS è¯­éŸ³æœ—è¯»åŠŸèƒ½ï¼ˆBetaï¼‰
- ğŸ“„ **Office æ–‡æ¡£**: æ”¯æŒ Office æ–‡æ¡£ï¼ˆWordã€Excelã€PowerPointï¼‰çš„ä¸Šä¼ å’Œæµè§ˆ
- ğŸ§ **æœ‰å£°å°è¯´**: æ”¯æŒæœ‰å£°ä¹¦/æœ‰å£°å°è¯´çš„å¯¼å…¥ã€ç®¡ç†ä¸æ’­æ”¾
- ğŸ’¬ **ä¹¦å‹äº¤æµ**: å†…ç½®ä¹¦å‹ç³»ç»Ÿä¸æ¶ˆæ¯ä¸­å¿ƒï¼Œæ”¯æŒå¥½å‹ã€ä¹¦å‹ä¼šç¾¤èŠã€æ–‡ä»¶ä¸ä¹¦ç±åˆ†äº«
- ğŸ”¤ **OCR è¯†åˆ«**: æ”¯æŒå›¾ç‰‡æ–‡å­—è¯†åˆ«ï¼Œé€‚ç”¨äº PDF å’Œå›¾ç‰‡ä¸­çš„æ–‡å­—æå–ï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼‰

---

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ğŸ“– é˜…è¯»åŠŸèƒ½
- å¤šæ ¼å¼é˜…è¯»å™¨ï¼ˆEPUBã€PDFã€TXTã€MOBIã€DOCXã€MDï¼‰
- å¤šç§é˜…è¯»ä¸»é¢˜ï¼ˆæµ…è‰²ã€æ·±è‰²ã€æŠ¤çœ¼ã€ç»¿è‰²ï¼‰
- å­—ä½“å¤§å°ã€å­—ä½“ç±»å‹ã€è¡Œé—´è·è‡ªå®šä¹‰
- æ”¯æŒè‡ªå®šä¹‰å­—ä½“ï¼ˆå¯ä¸Šä¼ å­—ä½“æ–‡ä»¶ï¼‰
- ç›®å½•å¯¼èˆªï¼ˆæ”¯æŒå¤šçº§ç›®å½•ï¼‰
- ä¹¦ç­¾ç®¡ç†
- ç¬”è®°å’Œé«˜äº®ï¼ˆç¦»çº¿å¯ç”¨ï¼Œè”ç½‘è‡ªåŠ¨åŒæ­¥ï¼‰
- å…¨æ–‡æœç´¢ï¼ˆæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼‰
- é˜…è¯»è¿›åº¦åŒæ­¥ï¼ˆå¤šè®¾å¤‡åŒæ­¥ï¼‰
- OCR æ–‡å­—è¯†åˆ«ï¼ˆæ”¯æŒ PDF å›¾ç‰‡ä¸­çš„æ–‡å­—è¯†åˆ«ï¼Œæ”¯æŒå¤šè¯­è¨€ï¼‰

### ğŸ“š ç®¡ç†åŠŸèƒ½
- ä¸Šä¼ ã€åˆ é™¤ã€ç¼–è¾‘ä¹¦ç±ä¿¡æ¯
- è‡ªåŠ¨æå–ä¹¦ç±å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€ä½œè€…ã€å°é¢ç­‰ï¼‰
- æ”¯æŒè±†ç“£ API è‡ªåŠ¨è·å–ä¹¦ç±ä¿¡æ¯
- ä¹¦ç±åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
- æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡åˆ é™¤ã€æ‰¹é‡åˆ†ç±»ï¼‰
- ä¸ªäººä¹¦æ¶ç®¡ç†
- æ‰¹é‡å¯¼å…¥ï¼ˆæ”¯æŒæ–‡ä»¶ç›‘æ§è‡ªåŠ¨å¯¼å…¥ï¼‰
- æ”¯æŒå­ç›®å½•é€’å½’æ‰«æ

### ğŸ‘¥ ç”¨æˆ·åŠŸèƒ½
- å¤šç”¨æˆ·æ”¯æŒ
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
- ç®¡ç†å‘˜åå°
- é˜…è¯»ç»Ÿè®¡ï¼ˆé˜…è¯»æ—¶é•¿ã€é˜…è¯»è¿›åº¦ã€é˜…è¯»å†å²ï¼‰
- ä¸ªäººè®¾ç½®

### ğŸ¤– AI åŠŸèƒ½
- æ”¯æŒ Ollama æœ¬åœ° AI æœåŠ¡
- æ™ºèƒ½é˜…è¯»è¾…åŠ©
- ä¹¦ç±å†…å®¹åˆ†æ
- AI å¯¹è¯åŠŸèƒ½

### ğŸ” å®‰å…¨åŠŸèƒ½
- JWT èº«ä»½è®¤è¯
- IP è®¿é—®æ§åˆ¶ï¼ˆç™½åå•/é»‘åå•ï¼‰
- éªŒè¯ç ä¿æŠ¤ï¼ˆç™»å½•ã€æ³¨å†Œï¼‰
- å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰

---

## ğŸ³ å®‰è£…éƒ¨ç½²

### å‰ç½®è¦æ±‚

- **Docker**: 20.10+ å’Œ Docker Compose 2.0+
- **å†…å­˜**: è‡³å°‘ 2GB å¯ç”¨å†…å­˜ï¼ˆæ¨è 4GB+ï¼‰
- **ç£ç›˜ç©ºé—´**: è‡³å°‘ 5GB å¯ç”¨ç£ç›˜ç©ºé—´ï¼ˆæ¨è 10GB+ï¼‰
- **ç½‘ç»œ**: éœ€è¦è®¿é—®äº’è”ç½‘ï¼ˆç”¨äºä¸‹è½½é•œåƒå’Œä¾èµ–ï¼‰

### ç³»ç»Ÿè¦æ±‚

- **macOS**: 10.15+ (Catalina æˆ–æ›´é«˜ç‰ˆæœ¬) éœ€è¦ Docker Desktop
- **Windows**: 10/11 (64ä½) éœ€è¦ WSL 2 æˆ– Docker Desktop
- **Linux**: Ubuntu 20.04+ / Debian 11+ / CentOS 8+ / Fedora 34+ éœ€è¦ Docker Engine
- **ç¾¤æ™– NAS**: DSM 7.0+ æˆ– DSM 6.2+ éœ€è¦ Docker å¥—ä»¶

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆDocker å®‰è£…ï¼‰

### æ–¹å¼ä¸€ï¼šä¸€é”®å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰

è¿™æ˜¯æœ€ç®€å•å¿«æ·çš„å®‰è£…æ–¹å¼ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰é…ç½®ã€‚

#### æ­¥éª¤ 1ï¼šå…‹éš†é¡¹ç›®

```bash
git clone https://github.com/ttbye/readknows.git
cd readknows
```

#### æ­¥éª¤ 2ï¼šè¿è¡Œå®‰è£…è„šæœ¬

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x install-zh.sh

# è¿è¡Œå®‰è£…è„šæœ¬
./install-zh.sh
```

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
1. æ£€æŸ¥ Docker å’Œ Docker Compose æ˜¯å¦å®‰è£…
2. æ£€æŸ¥ Docker æœåŠ¡æ˜¯å¦è¿è¡Œ
3. è‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿå¹³å°ï¼ˆmacOS/Windows/Linux/ç¾¤æ™–ï¼‰
4. è‡ªåŠ¨åˆ›å»º `.env` ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆç”Ÿæˆéšæœº JWT_SECRETï¼‰
5. åˆ›å»ºæ•°æ®ç›®å½•ç»“æ„
6. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼ˆ1280 å‰ç«¯ï¼Œ1281 åç«¯ï¼‰
7. æ„å»º Docker é•œåƒï¼ˆå¦‚æœéœ€è¦ï¼‰
8. å¯åŠ¨æœåŠ¡å®¹å™¨
9. åˆå§‹åŒ–ç®¡ç†å‘˜è´¦æˆ·ï¼ˆå¯é€‰ï¼‰

#### æ­¥éª¤ 3ï¼šè®¿é—®åº”ç”¨

å®‰è£…å®Œæˆåï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼š

```
========================================
å®‰è£…å®Œæˆ
========================================
âœ… ReadKnows (è¯»å£«ç§äººä¹¦åº“) å·²æˆåŠŸå®‰è£…å¹¶å¯åŠ¨ï¼

è®¿é—®åœ°å€:
  ğŸŒ å‰ç«¯: http://localhost:1280
  ğŸ”Œ åç«¯API: http://localhost:1281

é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·:
  ç”¨æˆ·å: books
  å¯†ç : readknows

âš ï¸  é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼
```

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š**http://localhost:1280**

---

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨ Docker éƒ¨ç½²

å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨æ§åˆ¶éƒ¨ç½²è¿‡ç¨‹ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

#### æ­¥éª¤ 1ï¼šå…‹éš†é¡¹ç›®

```bash
git clone https://github.com/ttbye/readknows.git
cd readknows
```

#### æ­¥éª¤ 2ï¼šåˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cat > .env << EOF
# JWTé…ç½®
JWT_SECRET=$(openssl rand -base64 32)
JWT_EXPIRES_IN=7d

# è±†ç“£APIé…ç½®ï¼ˆå¯é€‰ï¼‰
DOUBAN_API_BASE=

# AIé…ç½®ï¼ˆå¯é€‰ï¼‰
AI_PROVIDER=ollama
AI_API_URL=http://frontend:1280/ollama-proxy
AI_API_KEY=
AI_MODEL=llama2

# OllamaæœåŠ¡å™¨åœ°å€
OLLAMA_URL=http://host.docker.internal:11434

# CORSé…ç½®ï¼ˆå…¬ç½‘åŸŸåè®¿é—®å¿…é¡»é…ç½®ï¼‰
# è¯·å°† 'æ‚¨çš„åŸŸå' æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åŸŸå
# å¤šä¸ªåŸŸåå¯ä»¥ç”¨é€—å·åˆ†éš”
ALLOWED_ORIGINS=https://æ‚¨çš„åŸŸå:1280
EOF
```

> âš ï¸ **é‡è¦æç¤º**ï¼šå¦‚æœéƒ¨ç½²åˆ°å…¬ç½‘åŸŸåï¼Œè¯·å°† `ALLOWED_ORIGINS` ä¸­çš„ `æ‚¨çš„åŸŸå` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åŸŸåã€‚æœ¬åœ°å¼€å‘å¯ä»¥çœç•¥æ­¤é…ç½®ã€‚

#### æ­¥éª¤ 3ï¼šåˆ›å»ºæ•°æ®ç›®å½•

```bash
# åˆ›å»ºæ•°æ®ç›®å½•ç»“æ„
mkdir -p data/backend/{data,books,covers,fonts,import}
```

#### æ­¥éª¤ 4ï¼šé€‰æ‹© docker-compose æ–‡ä»¶

æ ¹æ®æ‚¨çš„å¹³å°é€‰æ‹©å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼š

- **æ ‡å‡†ç¯å¢ƒ**: `sh/docker-compose.yml`
- **macOS**: `sh/docker-compose-MACOS.yml`
- **Windows**: `sh/docker-compose-WINDOWS.yml`
- **Linux**: `sh/docker-compose-Linux.yml`
- **ç¾¤æ™– NAS**: `sh/docker-compose-Synology.yml`

#### æ­¥éª¤ 5ï¼šæ„å»ºå¹¶å¯åŠ¨æœåŠ¡

```bash
# è¿›å…¥ sh ç›®å½•
cd sh

# ä½¿ç”¨æ ‡å‡†é…ç½®æ„å»ºå¹¶å¯åŠ¨
docker compose -f docker-compose.yml up -d --build

# æˆ–ä½¿ç”¨å¹³å°ç‰¹å®šé…ç½®ï¼ˆä»¥ Linux ä¸ºä¾‹ï¼‰
docker compose -f docker-compose-Linux.yml up -d --build
```

#### æ­¥éª¤ 6ï¼šæŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker compose -f docker-compose.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker compose -f docker-compose.yml logs -f

# åªæŸ¥çœ‹åç«¯æ—¥å¿—
docker compose -f docker-compose.yml logs -f backend

# åªæŸ¥çœ‹å‰ç«¯æ—¥å¿—
docker compose -f docker-compose.yml logs -f frontend
```

#### æ­¥éª¤ 7ï¼šåˆå§‹åŒ–ç®¡ç†å‘˜è´¦æˆ·

```bash
# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
docker compose -f docker-compose.yml exec backend node scripts/initAdmin.js

# æˆ–ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„è„šæœ¬
cd ..
chmod +x sh/init-admin.sh
./sh/init-admin.sh
```

#### æ­¥éª¤ 8ï¼šè®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š**http://localhost:1280**

ä½¿ç”¨é»˜è®¤å‡­è¯ç™»å½•ï¼š
- **ç”¨æˆ·å**: `books`
- **å¯†ç **: `readknows`

> âš ï¸ **å®‰å…¨æç¤º**: é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

`.env` æ–‡ä»¶åŒ…å«ä»¥ä¸‹é…ç½®é¡¹ï¼š

```env
# JWT è®¤è¯é…ç½®
JWT_SECRET=your-secret-key-here-change-in-production
JWT_EXPIRES_IN=7d

# è±†ç“£ API é…ç½®ï¼ˆå¯é€‰ï¼‰
DOUBAN_API_BASE=https://api.douban.com/v2

# AI é…ç½®ï¼ˆå¯é€‰ï¼‰
AI_PROVIDER=ollama
AI_API_URL=http://frontend:1280/ollama-proxy
AI_API_KEY=
AI_MODEL=llama2

# Ollama æœåŠ¡å™¨é…ç½®
OLLAMA_URL=http://host.docker.internal:11434

# CORS é…ç½®ï¼ˆå…¬ç½‘åŸŸåè®¿é—®å¿…é¡»é…ç½®ï¼‰
# æ ¼å¼ï¼šå¤šä¸ªåŸŸåç”¨é€—å·åˆ†éš”
# ç¤ºä¾‹ï¼šhttps://example.com:1280,https://www.example.com:1280
# å¦‚æœä¸é…ç½®ï¼Œé»˜è®¤åªå…è®¸æœ¬åœ°ç½‘ç»œè®¿é—®
ALLOWED_ORIGINS=https://æ‚¨çš„åŸŸå:1280
```

> âš ï¸ **é‡è¦æç¤º**ï¼šå¦‚æœæ‚¨éƒ¨ç½²åˆ°å…¬ç½‘åŸŸåï¼Œ**å¿…é¡»**åœ¨ `.env` æ–‡ä»¶æˆ– docker-compose é…ç½®æ–‡ä»¶ä¸­é…ç½® `ALLOWED_ORIGINS`ã€‚è¯·å°† `æ‚¨çš„åŸŸå` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åŸŸåã€‚å¤šä¸ªåŸŸåå¯ä»¥ç”¨é€—å·åˆ†éš”ã€‚

### æ•°æ®ç›®å½•ç»“æ„

é»˜è®¤æ•°æ®ç›®å½•ç»“æ„ï¼š

```
data/
â””â”€â”€ backend/
    â”œâ”€â”€ data/          # SQLite æ•°æ®åº“æ–‡ä»¶
    â”œâ”€â”€ books/         # ä¹¦ç±æ–‡ä»¶å­˜å‚¨ç›®å½•
    â”œâ”€â”€ covers/        # å°é¢å›¾ç‰‡å­˜å‚¨ç›®å½•
    â”œâ”€â”€ fonts/         # å­—ä½“æ–‡ä»¶å­˜å‚¨ç›®å½•
    â””â”€â”€ import/        # å¯¼å…¥ç›®å½•ï¼ˆç›‘æ§æ­¤ç›®å½•è‡ªåŠ¨å¯¼å…¥ï¼‰
```

### ç«¯å£é…ç½®

é»˜è®¤ç«¯å£é…ç½®ï¼š
- **å‰ç«¯**: 1280 (HTTP)
- **åç«¯ API**: 1281 (HTTP)

ä¿®æ”¹ç«¯å£ï¼šåœ¨ `docker-compose.yml` ä¸­ä¿®æ”¹ç«¯å£æ˜ å°„ï¼š

```yaml
services:
  frontend:
    ports:
      - "8080:1280"  # å°†å‰ç«¯ç«¯å£æ”¹ä¸º 8080
  backend:
    ports:
      - "8081:1281"  # å°†åç«¯ç«¯å£æ”¹ä¸º 8081
```

### CORS é…ç½®ï¼ˆå…¬ç½‘åŸŸåè®¿é—®ï¼‰

å¦‚æœæ‚¨å°† ReadKnows éƒ¨ç½²åˆ°å…¬ç½‘åŸŸåï¼ˆä¸ä»…ä»…æ˜¯ localhostï¼‰ï¼Œ**å¿…é¡»**é…ç½® `ALLOWED_ORIGINS` ç¯å¢ƒå˜é‡ä»¥å…è®¸æ¥è‡ªæ‚¨åŸŸåçš„ CORS è¯·æ±‚ã€‚

#### æ–¹æ³•ä¸€ï¼šåœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®

åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```env
ALLOWED_ORIGINS=https://æ‚¨çš„åŸŸå:1280
```

å¤šä¸ªåŸŸåé…ç½®ï¼š

```env
ALLOWED_ORIGINS=https://example.com:1280,https://www.example.com:1280,https://app.example.com:1280
```

#### æ–¹æ³•äºŒï¼šåœ¨ docker-compose æ–‡ä»¶ä¸­é…ç½®

å¦‚æœæ‚¨ä½¿ç”¨å¹³å°ç‰¹å®šçš„ docker-compose æ–‡ä»¶ï¼ˆä¾‹å¦‚ `docker-compose-MACOS.yml`ã€`docker-compose-Linux.yml`ï¼‰ï¼Œå¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶ä¸­ä¿®æ”¹ `ALLOWED_ORIGINS` ç¯å¢ƒå˜é‡ï¼š

```yaml
environment:
  - ALLOWED_ORIGINS=${ALLOWED_ORIGINS:-https://æ‚¨çš„åŸŸå:1280}
```

è¯·å°† `æ‚¨çš„åŸŸå` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åŸŸåã€‚

#### é‡è¦æç¤ºï¼š

- **æœ¬åœ°å¼€å‘**ï¼šå¦‚æœä»…é€šè¿‡ `localhost` æˆ–æœ¬åœ°ç½‘ç»œè®¿é—®ï¼Œå¯ä»¥çœç•¥æ­¤é…ç½®ã€‚
- **å…¬ç½‘åŸŸå**ï¼šå¦‚æœéƒ¨ç½²åˆ°å…¬ç½‘åŸŸåï¼Œæ­¤é…ç½®æ˜¯**å¿…éœ€çš„**ï¼Œå¦åˆ™ä¼šå‡ºç° CORS é”™è¯¯ã€‚
- **ç«¯å£å·**ï¼šç¡®ä¿ `ALLOWED_ORIGINS` ä¸­çš„ç«¯å£å·ä¸æ‚¨çš„å‰ç«¯ç«¯å£åŒ¹é…ï¼ˆé»˜è®¤ä¸º 1280ï¼‰ã€‚
- **HTTPS**ï¼šå¦‚æœä½¿ç”¨ HTTPSï¼ŒURL ä¸­ä½¿ç”¨ `https://`ã€‚å¦‚æœä½¿ç”¨ HTTPï¼Œä½¿ç”¨ `http://`ã€‚
- **å¤šä¸ªåŸŸå**ï¼šå¤šä¸ªåŸŸåç”¨é€—å·åˆ†éš”ï¼ˆä¸è¦æœ‰ç©ºæ ¼ï¼‰ã€‚

---

## ğŸ“– ä½¿ç”¨æ–‡æ¡£

### é¦–æ¬¡ç™»å½•

å®‰è£…å®Œæˆåï¼Œä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ç™»å½•ï¼š
- **ç”¨æˆ·å**: `books`
- **å¯†ç **: `readknows`
- **é‚®ç®±**: `admin@readknows.local`

> âš ï¸ **å®‰å…¨æç¤º**: é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

### å®‰è£… Calibreï¼ˆMOBI è½¬ EPUBï¼‰

å¦‚æœéœ€è¦ MOBI è½¬ EPUB åŠŸèƒ½ï¼Œéœ€è¦å®‰è£… Calibreï¼š

```bash
chmod +x sh/install-calibre.sh
./sh/install-calibre.sh
```

### æ‰¹é‡å¯¼å…¥ä¹¦ç±

#### æ–¹æ³•ä¸€ï¼šé€šè¿‡ Web ç•Œé¢å¯¼å…¥
1. ç™»å½•ç³»ç»Ÿ
2. è¿›å…¥ **ä¸Šä¼ ** é¡µé¢
3. ç‚¹å‡» **æ‰¹é‡å¯¼å…¥** æˆ– **æ‰«æå¯¼å…¥**
4. é€‰æ‹©è¦å¯¼å…¥çš„ç›®å½•

#### æ–¹æ³•äºŒï¼šæ–‡ä»¶ç›‘æ§è‡ªåŠ¨å¯¼å…¥
1. å°†ä¹¦ç±æ–‡ä»¶æ”¾å…¥ `data/backend/import/` ç›®å½•
2. ç³»ç»Ÿä¼šè‡ªåŠ¨ç›‘æ§æ­¤ç›®å½•
3. æ£€æµ‹åˆ°æ–°æ–‡ä»¶åè‡ªåŠ¨å¯¼å…¥

### å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker compose -f sh/docker-compose.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker compose -f sh/docker-compose.yml logs -f

# é‡å¯æœåŠ¡
docker compose -f sh/docker-compose.yml restart

# åœæ­¢æœåŠ¡
docker compose -f sh/docker-compose.yml stop

# å¯åŠ¨æœåŠ¡
docker compose -f sh/docker-compose.yml start

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨
docker compose -f sh/docker-compose.yml down

# é‡å»ºé•œåƒ
docker compose -f sh/docker-compose.yml build --no-cache
```

---

## ğŸ› å¸¸è§é—®é¢˜

### å®¹å™¨å¯åŠ¨å¤±è´¥

1. **æ£€æŸ¥ Docker æœåŠ¡**:
   ```bash
   docker info
   ```

2. **æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨**:
   ```bash
   # Linux/macOS
   lsof -i :1280
   lsof -i :1281
   
   # Windows
   netstat -ano | findstr :1280
   netstat -ano | findstr :1281
   ```

3. **æŸ¥çœ‹å®¹å™¨æ—¥å¿—**:
   ```bash
   docker compose -f sh/docker-compose.yml logs backend
   docker compose -f sh/docker-compose.yml logs frontend
   ```

### EPUB å°é¢æ— æ³•æå–/æ˜¾ç¤º

é€šå¸¸æ˜¯ç›®å½•æƒé™é—®é¢˜ï¼š

```bash
# ä¿®å¤æƒé™
sudo chmod -R 777 data/backend/covers

# é‡å¯å®¹å™¨
docker compose -f sh/docker-compose.yml restart backend
```

### æ— æ³•è®¿é—®å®¿ä¸»æœºæœåŠ¡ï¼ˆå¦‚ Ollamaï¼‰

æ£€æŸ¥ç½‘ç»œé…ç½®ï¼š

1. **ä½¿ç”¨ host.docker.internal**:
   ```env
   OLLAMA_URL=http://host.docker.internal:11434
   ```

2. **Linux éœ€è¦é¢å¤–é…ç½®**:
   ```yaml
   # åœ¨ docker-compose.yml ä¸­æ·»åŠ 
   extra_hosts:
     - "host.docker.internal:host-gateway"
   ```

### MOBI æ–‡ä»¶æ— æ³•è½¬æ¢

éœ€è¦å®‰è£… Calibreï¼š

```bash
./sh/install-calibre.sh
```

### å¿˜è®°ç®¡ç†å‘˜å¯†ç 

é‡ç½®å¯†ç ï¼š

```bash
docker compose -f sh/docker-compose.yml exec backend node scripts/resetPassword.js
```

---

## ğŸ”’ å®‰å…¨è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **: é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 
2. **ä½¿ç”¨å¼ºå¯†ç **: JWT_SECRET åº”ä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²
3. **é…ç½® HTTPS**: å»ºè®®ä½¿ç”¨ Nginx åå‘ä»£ç†é…ç½® HTTPS
4. **å®šæœŸå¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®åº“å’Œä¹¦ç±æ–‡ä»¶
5. **IP è®¿é—®æ§åˆ¶**: é…ç½® IP ç™½åå•é™åˆ¶è®¿é—®
6. **æ›´æ–°ä¾èµ–**: å®šæœŸæ›´æ–°ä¾èµ–åŒ…ä¿®å¤å®‰å…¨æ¼æ´
7. **é˜²ç«å¢™é…ç½®**: é…ç½®é˜²ç«å¢™è§„åˆ™é™åˆ¶ç«¯å£è®¿é—®

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

---

## ğŸ™ è‡´è°¢

- [EPUB.js](https://github.com/futurepress/epub.js) - EPUB é˜…è¯»å™¨
- [PDF.js](https://github.com/mozilla/pdf.js) - PDF é˜…è¯»å™¨
- [Calibre](https://calibre-ebook.com/) - ç”µå­ä¹¦ç®¡ç†å·¥å…·
- [React](https://react.dev/) - UI æ¡†æ¶
- [Express](https://expressjs.com/) - Web æ¡†æ¶

---

## ğŸ“® è”ç³»æ–¹å¼

- **ä½œè€…**: ttbye
- **é¡¹ç›®åœ°å€**: https://github.com/ttbye/readknows
- **é—®é¢˜åé¦ˆ**: https://github.com/ttbye/readknows/issues

---

<div align="center">

**Made with â¤ï¸ by ttbye**

[â¬† å›åˆ°é¡¶éƒ¨](#-readknows-è¯»å£«ç§äººä¹¦åº“)

</div>
